# Developer Tech Test 

My solution to the test as described [here](https://gist.github.com/mattmcgrattan/42172e829e50ce037ae62927cb95ecfe).

The code will analyse the text on the URL given in the payload and extract and count named entities. For each person, it will count the occurrences and compute which locations are mentioned within a span of 100 words to both sides of the name. 

### Data

The data was mostly tested with texts on [Project Gutenberg](https://www.gutenberg.org). 

For an easier example, check the [sample text](https://raw.githubusercontent.com/athrado/api_task/main/sample_text.txt) for a few travel adventures generated by ChatGPT. The text was manually modified to include  filler sequences in order to easily count locations within a 100 word span. Note that the last section mentions all character names once more. 

### How to run

Install spaCy according to [documentation](https://spacy.io/usage), for example:

```
pip install -U pip setuptools wheel
pip install -U spacy
python3 -m spacy download en_core_web_sm
```

Then install remaining requirements:

```pip install -r requirements.txt```

### How to test

You can test the API for example with a sample text generated with ChatGPT:

```curl -X POST -H "Content-Type: application/json" -d '{"URL": "https://raw.githubusercontent.com/athrado/api_task/main/sample_text.txt", "author": "ChatGPT", "title": "Travel Stories"}' http://127.0.0.1:8000/get_text/```

Which character travelled the most? 

You can test the code with: `pytest app/test_main.py`

### How to improve

The code could be further improved. 

- Applying coreference resolution to named entities to ensure mentions of the same entity in different formats are counted respectively, e.g. "Sarah" instead of "Sarah Potter" or "NY" instead of "New York". 

- Further enrichment of the data, for example by adding coordinates to location, to facilitate visualisations of the data.
